<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Desigualdades con Gráfico</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    body {
      font-family: Arial;
      background-color: #c8e8e0;
      padding: 20px;
      max-width: 700px;
      margin: auto;
    }
    input, select, button {
      padding: 8px;
      margin: 6px 0;
      width: 100%;
    }
    #resultado {
      margin-top: 15px;
      background: #e6f7ff;
      padding: 10px;
      border-left: 4px solid #007acc;
    }
    canvas {
      margin-top: 20px;
    }
  </style>
</head>
<body>

  <h2>Resolver Desigualdades y Graficar</h2>

  <label>Tipo de desigualdad:</label>
  <select id="tipo">
    <option value="lineal">Lineal (ax + b > 0)</option>
    <option value="cuadratica">Cuadrática (ax² + bx + c > 0)</option>
  </select>

  <label>Coeficiente a:</label>
  <input type="number" id="a">

  <label>Coeficiente b:</label>
  <input type="number" id="b">

  <label>Coeficiente c (solo para cuadráticas):</label>
  <input type="number" id="c" value="0">

  <label>Desigualdad:</label>
  <select id="desigualdad">
    <option value=">">&gt;</option>
    <option value=">=">&ge;</option>
    <option value="<">&lt;</option>
    <option value="<=">&le;</option>
  </select>

  <button onclick="resolver()">Resolver</button>

  <div id="resultado"></div>

  <canvas id="grafico" width="600" height="300"></canvas>

  <script>
    let chart;

    function resolver() {
      const tipo = document.getElementById('tipo').value;
      const a = parseFloat(document.getElementById('a').value);
      const b = parseFloat(document.getElementById('b').value);
      const c = parseFloat(document.getElementById('c').value);
      const simbolo = document.getElementById('desigualdad').value;
      let res = '';

      let labels = [];
      let valores = [];

      for (let x = -10; x <= 10; x += 0.1) {
        x = parseFloat(x.toFixed(2));
        labels.push(x);
        let y;
        if (tipo === 'lineal') {
          y = a * x + b;
        } else {
          y = a * x * x + b * x + c;
        }
        valores.push(y);
      }

      // Resolver desigualdad
      if (tipo === 'lineal') {
        if (a !== 0) {
          const x = -b / a;
          res = Solución: x ${simbolo} ${x.toFixed(2)};
        } else {
          res = b + ' ' + simbolo + ' 0';
        }
      } else {
        const D = b * b - 4 * a * c;
        if (D < 0) {
          res = 'No hay soluciones reales (la parábola no corta el eje x).';
        } else {
          const x1 = (-b + Math.sqrt(D)) / (2 * a);
          const x2 = (-b - Math.sqrt(D)) / (2 * a);
          const xmin = Math.min(x1, x2).toFixed(2);
          const xmax = Math.max(x1, x2).toFixed(2);
          if (a > 0) {
            if (simbolo === '>') res = Solución: x < ${xmin} o x > ${xmax};
            if (simbolo === '<') res = Solución: ${xmin} < x < ${xmax};
          } else {
            if (simbolo === '>') res = Solución: ${xmin} < x < ${xmax};
            if (simbolo === '<') res = Solución: x < ${xmin} o x > ${xmax};
          }
        }
      }

      document.getElementById('resultado').innerText = res;

      // Mostrar gráfico
      if (chart) chart.destroy();
      const ctx = document.getElementById('grafico').getContext('2d');
      chart = new Chart(ctx, {
        type: 'line',
        data: {
          labels: labels,
          datasets: [{
            label: tipo === 'lineal' ? 'f(x) = ax + b' : 'f(x) = ax² + bx + c',
            data: valores,
            borderColor: 'blue',
            fill: false,
            pointRadius: 0,
            borderWidth: 2
          }]
        },
        options: {
          responsive: true,
          scales: {
            x: {
              title: { display: true, text: 'x' }
            },
            y: {
              title: { display: true, text: 'f(x)' },
              beginAtZero: false
            }
          }
        }
      });
    }
  </script>

</body>
</html>
